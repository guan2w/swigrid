# Schulte Grid iOS 原生重写 - 架构与实现约束

## 1. 技术选型

- UI：`SwiftUI`
- 架构：`Clean Architecture + MVVM`
- 并发：`Swift Concurrency`
- 存储：`UserDefaults + Codable`
- 工程形态：`Swift Package` 业务模块 + `Xcode iOS App` 壳工程

## 2. 分层边界

- Presentation：Screen / ViewModel / UI State
- Domain：Entity / Rules / UseCase / Repository Protocol
- Data：Repository 实现 / Store Adapter / 编解码
- Core：DesignSystem / Audio / Haptics / Support

约束：

- Domain 不依赖 SwiftUI/UIKit
- ViewModel 不直接访问 `UserDefaults.standard`
- 业务规则必须在 Domain/UseCase，可被单测覆盖

## 3. 当前落地结构

```text
ios-native/
├── Package.swift
├── Sources/
│   ├── SchulteDomain/
│   ├── SchulteData/
│   ├── SchulteFeatures/
│   ├── SchulteApp/            # SchulteAppUI
│   └── SchulteAppExecutable/  # SwiftPM 可执行入口
├── Tests/
│   ├── SchulteDomainTests/
│   ├── SchulteDataTests/
│   └── SchulteFeaturesTests/
└── ios-app/
    ├── swigrid/
    ├── swigridUITests/
    └── swigrid.xcodeproj
```

## 4. 模板映射（认知层）

- App -> `Sources/SchulteApp/App`
- Features -> `Sources/SchulteApp/Features` + `Sources/SchulteFeatures`
- Domain -> `Sources/SchulteDomain`
- Data -> `Sources/SchulteData`
- Core -> `Sources/SchulteApp/Core`
- Resources -> `Sources/SchulteApp/Resources`
- UI Tests -> `ios-app/swigridUITests`

## 5. 演进约束

1. 保持“壳工程 + 本地 Package 依赖”结构。
2. 发布前新增签名/打包能力，不搬迁业务代码。
3. 目录、Target、脚本变化必须同步更新文档与进度。
